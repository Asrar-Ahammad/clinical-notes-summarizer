{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.240.0"},"children":{"ClinicalSummaryStack":{"id":"ClinicalSummaryStack","path":"ClinicalSummaryStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.240.0"},"children":{"ClinicalUserPool":{"id":"ClinicalUserPool","path":"ClinicalSummaryStack/ClinicalUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"name","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"clinical-summarizer-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"ClinicalAppClient":{"id":"ClinicalAppClient","path":"ClinicalSummaryStack/ClinicalAppClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalAppClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"clinical-summarizer-web","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"preventUserExistenceErrors":"ENABLED","supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"ClinicalUserPoolB7E95C1D"}}}}}},"SummaryJobsTable":{"id":"SummaryJobsTable","path":"ClinicalSummaryStack/SummaryJobsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/SummaryJobsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"jobId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"jobId","keyType":"HASH"}]}}},"ScalingRole":{"id":"ScalingRole","path":"ClinicalSummaryStack/SummaryJobsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.240.0"}}}},"AiServicesRole":{"id":"AiServicesRole","path":"ClinicalSummaryStack/AiServicesRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/AiServicesRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ClinicalSummaryStack/AiServicesRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/AiServicesRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock:InvokeModel","comprehendmedical:*"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::GetAtt":["SummaryJobsTable3256FF04","Arn"]}}],"Version":"2012-10-17"},"policyName":"AiServicesRoleDefaultPolicy172EE3E2","roles":[{"Ref":"AiServicesRole938811A2"}]}}}}}}},"InputProcessorFunction":{"id":"InputProcessorFunction","path":"ClinicalSummaryStack/InputProcessorFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.240.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ClinicalSummaryStack/InputProcessorFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/InputProcessorFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ClinicalSummaryStack/InputProcessorFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/InputProcessorFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::GetAtt":["SummaryJobsTable3256FF04","Arn"]}}],"Version":"2012-10-17"},"policyName":"InputProcessorFunctionServiceRoleDefaultPolicy4A2D91BF","roles":[{"Ref":"InputProcessorFunctionServiceRole874DDD6A"}]}}}}}}},"Code":{"id":"Code","path":"ClinicalSummaryStack/InputProcessorFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.240.0"},"children":{"Stage":{"id":"Stage","path":"ClinicalSummaryStack/InputProcessorFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.240.0"}},"AssetBucket":{"id":"AssetBucket","path":"ClinicalSummaryStack/InputProcessorFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.240.0"}}}},"Resource":{"id":"Resource","path":"ClinicalSummaryStack/InputProcessorFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"1ebc9d3ac2033816c4abb63e4afd69d350b4aba8704cc9236b82ea520b74f4b0.zip"},"environment":{"variables":{"JOBS_TABLE_NAME":{"Ref":"SummaryJobsTable3256FF04"}}},"handler":"input-processor.handler","role":{"Fn::GetAtt":["InputProcessorFunctionServiceRole874DDD6A","Arn"]},"runtime":"nodejs20.x","timeout":10}}}}},"SummarizerFunction":{"id":"SummarizerFunction","path":"ClinicalSummaryStack/SummarizerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.240.0"},"children":{"Code":{"id":"Code","path":"ClinicalSummaryStack/SummarizerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.240.0"},"children":{"Stage":{"id":"Stage","path":"ClinicalSummaryStack/SummarizerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.240.0"}},"AssetBucket":{"id":"AssetBucket","path":"ClinicalSummaryStack/SummarizerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.240.0"}}}},"Resource":{"id":"Resource","path":"ClinicalSummaryStack/SummarizerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"1ebc9d3ac2033816c4abb63e4afd69d350b4aba8704cc9236b82ea520b74f4b0.zip"},"environment":{"variables":{"JOBS_TABLE_NAME":{"Ref":"SummaryJobsTable3256FF04"}}},"handler":"summarizer.handler","role":{"Fn::GetAtt":["AiServicesRole938811A2","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"SafetyValidatorFunction":{"id":"SafetyValidatorFunction","path":"ClinicalSummaryStack/SafetyValidatorFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.240.0"},"children":{"Code":{"id":"Code","path":"ClinicalSummaryStack/SafetyValidatorFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.240.0"},"children":{"Stage":{"id":"Stage","path":"ClinicalSummaryStack/SafetyValidatorFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.240.0"}},"AssetBucket":{"id":"AssetBucket","path":"ClinicalSummaryStack/SafetyValidatorFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.240.0"}}}},"Resource":{"id":"Resource","path":"ClinicalSummaryStack/SafetyValidatorFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"1ebc9d3ac2033816c4abb63e4afd69d350b4aba8704cc9236b82ea520b74f4b0.zip"},"environment":{"variables":{"JOBS_TABLE_NAME":{"Ref":"SummaryJobsTable3256FF04"}}},"handler":"safety-validator.handler","role":{"Fn::GetAtt":["AiServicesRole938811A2","Arn"]},"runtime":"nodejs20.x","timeout":15}}}}},"Process Input":{"id":"Process Input","path":"ClinicalSummaryStack/Process Input","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.240.0"}},"Summarize and Extract (Bedrock)":{"id":"Summarize and Extract (Bedrock)","path":"ClinicalSummaryStack/Summarize and Extract (Bedrock)","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.240.0"}},"Validate Safety Constraints":{"id":"Validate Safety Constraints","path":"ClinicalSummaryStack/Validate Safety Constraints","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.240.0"}},"Job Completed":{"id":"Job Completed","path":"ClinicalSummaryStack/Job Completed","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Succeed","version":"2.240.0"}},"Job Failed":{"id":"Job Failed","path":"ClinicalSummaryStack/Job Failed","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.240.0"}},"Is Valid?":{"id":"Is Valid?","path":"ClinicalSummaryStack/Is Valid?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.240.0"}},"SummarizationPipeline":{"id":"SummarizationPipeline","path":"ClinicalSummaryStack/SummarizationPipeline","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.240.0"},"children":{"Role":{"id":"Role","path":"ClinicalSummaryStack/SummarizationPipeline/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/SummarizationPipeline/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ClinicalSummaryStack/SummarizationPipeline/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/SummarizationPipeline/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["InputProcessorFunction3E275A41","Arn"]},{"Fn::GetAtt":["SafetyValidatorFunction2404DA37","Arn"]},{"Fn::GetAtt":["SummarizerFunctionDC62D143","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["InputProcessorFunction3E275A41","Arn"]},":*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SafetyValidatorFunction2404DA37","Arn"]},":*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["SummarizerFunctionDC62D143","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"SummarizationPipelineRoleDefaultPolicyAA2F8362","roles":[{"Ref":"SummarizationPipelineRoleF7417934"}]}}}}}}},"Resource":{"id":"Resource","path":"ClinicalSummaryStack/SummarizationPipeline/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"Process Input\",\"States\":{\"Process Input\":{\"Next\":\"Summarize and Extract (Bedrock)\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["InputProcessorFunction3E275A41","Arn"]},"\",\"Payload.$\":\"$\"}},\"Summarize and Extract (Bedrock)\":{\"Next\":\"Validate Safety Constraints\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["SummarizerFunctionDC62D143","Arn"]},"\",\"Payload.$\":\"$\"}},\"Validate Safety Constraints\":{\"Next\":\"Is Valid?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["SafetyValidatorFunction2404DA37","Arn"]},"\",\"Payload.$\":\"$\"}},\"Is Valid?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.isValid\",\"BooleanEquals\":true,\"Next\":\"Job Completed\"}],\"Default\":\"Job Failed\"},\"Job Failed\":{\"Type\":\"Fail\",\"Error\":\"JobFailedError\",\"Cause\":\"Pipeline validation or processing failed.\"},\"Job Completed\":{\"Type\":\"Succeed\"}},\"TimeoutSeconds\":300}"]]},"roleArn":{"Fn::GetAtt":["SummarizationPipelineRoleF7417934","Arn"]}}}}}},"ClinicalSummaryApi":{"id":"ClinicalSummaryApi","path":"ClinicalSummaryStack/ClinicalSummaryApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalSummaryApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API to submit clinical notes for summarization.","name":"Clinical Summarization Service"}}},"Deployment":{"id":"Deployment","path":"ClinicalSummaryStack/ClinicalSummaryApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalSummaryApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API to submit clinical notes for summarization.","restApiId":{"Ref":"ClinicalSummaryApi29947E01"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ClinicalSummaryStack/ClinicalSummaryApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalSummaryApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ClinicalSummaryApiDeploymentE4B2449E2bf905818dc2e8385ec90d235e280e49"},"restApiId":{"Ref":"ClinicalSummaryApi29947E01"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ClinicalSummaryStack/ClinicalSummaryApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.240.0"}},"Default":{"id":"Default","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.240.0"},"children":{"OPTIONS":{"id":"OPTIONS","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["ClinicalSummaryApi29947E01","RootResourceId"]},"restApiId":{"Ref":"ClinicalSummaryApi29947E01"}}}}}},"jobs":{"id":"jobs","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/jobs","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/jobs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ClinicalSummaryApi29947E01","RootResourceId"]},"pathPart":"jobs","restApiId":{"Ref":"ClinicalSummaryApi29947E01"}}}},"OPTIONS":{"id":"OPTIONS","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/jobs/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/jobs/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ClinicalSummaryApijobsF2762DEE"},"restApiId":{"Ref":"ClinicalSummaryApi29947E01"}}}}}},"POST":{"id":"POST","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/jobs/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/ClinicalSummaryApi/Default/jobs/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"POST","integration":{"type":"AWS","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":states:action/StartExecution"]]},"integrationHttpMethod":"POST","requestTemplates":{"application/json":{"Fn::Join":["",["{\n            \"input\": \"$util.escapeJavaScript($input.json('$'))\",\n            \"stateMachineArn\": \"",{"Ref":"SummarizationPipelineDDC4FC4B"},"\"\n          }"]]}},"integrationResponses":[{"statusCode":"200","responseTemplates":{"application/json":"{\"executionArn\": \"$input.path('$.executionArn')\", \"startDate\": \"$input.path('$.startDate')\"}"}}],"credentials":{"Fn::GetAtt":["RoleForApiGatewayToInvokeSfn6C97C883","Arn"]}},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"ClinicalSummaryApijobsF2762DEE"},"restApiId":{"Ref":"ClinicalSummaryApi29947E01"}}}}}}}}}}}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"ClinicalSummaryStack/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"ClinicalSummaryStackCognitoAuthorizer43F822DE","providerArns":[{"Fn::GetAtt":["ClinicalUserPoolB7E95C1D","Arn"]}],"restApiId":{"Ref":"ClinicalSummaryApi29947E01"},"type":"COGNITO_USER_POOLS"}}}}},"RoleForApiGatewayToInvokeSfn":{"id":"RoleForApiGatewayToInvokeSfn","path":"ClinicalSummaryStack/RoleForApiGatewayToInvokeSfn","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/RoleForApiGatewayToInvokeSfn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"InvokeSfnPolicy":{"id":"InvokeSfnPolicy","path":"ClinicalSummaryStack/InvokeSfnPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.240.0"},"children":{"Resource":{"id":"Resource","path":"ClinicalSummaryStack/InvokeSfnPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.240.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"SummarizationPipelineDDC4FC4B"}}],"Version":"2012-10-17"},"policyName":"InvokeSfnPolicy37E9A60E","roles":[{"Ref":"RoleForApiGatewayToInvokeSfn6C97C883"}]}}}}},"UserPoolId":{"id":"UserPoolId","path":"ClinicalSummaryStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.240.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"ClinicalSummaryStack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.240.0"}},"ApiEndpoint":{"id":"ApiEndpoint","path":"ClinicalSummaryStack/ApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.240.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ClinicalSummaryStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"},"children":{"Default":{"id":"Default","path":"ClinicalSummaryStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.240.0"}},"Condition":{"id":"Condition","path":"ClinicalSummaryStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.240.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ClinicalSummaryStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.240.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ClinicalSummaryStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.240.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"}}}}}